<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cubeb: cubeb</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cubeb<span id="projectnumber">&#160;0.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">cubeb </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>This is the documentation for the <code>libcubeb</code> C API. <code>libcubeb</code> is a callback-based audio API library allowing the authoring of portable multiplatform audio playback and recording.</p>
<h1><a class="anchor" id="example"></a>
Example code</h1>
<p>This example shows how to create a duplex stream that pipes the microphone to the speakers, with minimal latency and the proper sample-rate for the platform.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="cubeb_8h.html#a5ec1a9ede3a1e49310ca3d7e46d52f83">cubeb</a> * app_ctx;</div>
<div class="line"><a class="code hl_function" href="cubeb_8h.html#aa6bf94e43fdcef8e32b3409ba2bf9700">cubeb_init</a>(&amp;app_ctx, <span class="stringliteral">&quot;Example Application&quot;</span>, NULL);</div>
<div class="line"><span class="keywordtype">int</span> rv;</div>
<div class="line">uint32_t rate;</div>
<div class="line">uint32_t latency_frames;</div>
<div class="line">uint64_t ts;</div>
<div class="line"> </div>
<div class="line">rv = <a class="code hl_function" href="cubeb_8h.html#a07198c3846a51423c0547539239face2">cubeb_get_preferred_sample_rate</a>(app_ctx, &amp;rate);</div>
<div class="line"><span class="keywordflow">if</span> (rv != <a class="code hl_enumvalue" href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Could not get preferred sample-rate&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structcubeb__stream__params.html">cubeb_stream_params</a> output_params;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a23410bac5fbc6d86f37d9fc09f3d5d3d">format</a> = CUBEB_SAMPLE_FLOAT32NE;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#ad67260ce5fd956aba95968e14d827868">rate</a> = rate;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#afc0221acf53136ed0d17bcf6a52aaae3">channels</a> = 2;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a3f1ff5c9ce242ab67a0bd75bed7b7ccc">layout</a> = CUBEB_LAYOUT_UNDEFINED;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#aa282e861f9563aa4ba49e2c2757cb77a">prefs</a> = <a class="code hl_enumvalue" href="cubeb_8h.html#a999d0477ea31f366acbe40e85c91e203a250797c1d649453d9c5f17586cdebfcc">CUBEB_STREAM_PREF_NONE</a>;</div>
<div class="line">output_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a0a911eea8137b5fc2ad1bfbc2e2ddde4">input_params</a> = CUBEB_INPUT_PROCESSING_PARAM_NONE;</div>
<div class="line"> </div>
<div class="line">rv = <a class="code hl_function" href="cubeb_8h.html#af02c01f4827fa8febdd796933123eabf">cubeb_get_min_latency</a>(app_ctx, &amp;output_params, &amp;latency_frames);</div>
<div class="line"><span class="keywordflow">if</span> (rv != <a class="code hl_enumvalue" href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Could not get minimum latency&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structcubeb__stream__params.html">cubeb_stream_params</a> input_params;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a23410bac5fbc6d86f37d9fc09f3d5d3d">format</a> = CUBEB_SAMPLE_FLOAT32NE;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#ad67260ce5fd956aba95968e14d827868">rate</a> = rate;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#afc0221acf53136ed0d17bcf6a52aaae3">channels</a> = 1;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a3f1ff5c9ce242ab67a0bd75bed7b7ccc">layout</a> = CUBEB_LAYOUT_UNDEFINED;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#aa282e861f9563aa4ba49e2c2757cb77a">prefs</a> = <a class="code hl_enumvalue" href="cubeb_8h.html#a999d0477ea31f366acbe40e85c91e203a250797c1d649453d9c5f17586cdebfcc">CUBEB_STREAM_PREF_NONE</a>;</div>
<div class="line">input_params.<a class="code hl_variable" href="structcubeb__stream__params.html#a0a911eea8137b5fc2ad1bfbc2e2ddde4">input_params</a> = CUBEB_INPUT_PROCESSING_PARAM_NONE;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cubeb_8h.html#ab43023aaaa06dea4099db1cfe9afed86">cubeb_stream</a> * stm;</div>
<div class="line">rv = <a class="code hl_function" href="cubeb_8h.html#a76308e6c60f6389675a0d3dc5b9e7c2a">cubeb_stream_init</a>(app_ctx, &amp;stm, <span class="stringliteral">&quot;Example Stream 1&quot;</span>,</div>
<div class="line">                       NULL, &amp;input_params,</div>
<div class="line">                       NULL, &amp;output_params,</div>
<div class="line">                       latency_frames,</div>
<div class="line">                       data_cb, state_cb,</div>
<div class="line">                       NULL);</div>
<div class="line"><span class="keywordflow">if</span> (rv != <a class="code hl_enumvalue" href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Could not open the stream&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">rv = <a class="code hl_function" href="cubeb_8h.html#a71c51be21e1205c4c3c1883793036d56">cubeb_stream_start</a>(stm);</div>
<div class="line"><span class="keywordflow">if</span> (rv != <a class="code hl_enumvalue" href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Could not start the stream&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">for</span> (;;) {</div>
<div class="line">  <a class="code hl_function" href="cubeb_8h.html#ac1749e2bace45316a1b6433858f799f2">cubeb_stream_get_position</a>(stm, &amp;ts);</div>
<div class="line">  printf(<span class="stringliteral">&quot;time=%llu\n&quot;</span>, ts);</div>
<div class="line">  sleep(1);</div>
<div class="line">}</div>
<div class="line">rv = <a class="code hl_function" href="cubeb_8h.html#aba189b4d443c52cf6c2ad510580c9924">cubeb_stream_stop</a>(stm);</div>
<div class="line"><span class="keywordflow">if</span> (rv != <a class="code hl_enumvalue" href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a>) {</div>
<div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Could not stop the stream&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="cubeb_8h.html#ac6616783295014ed61d512cf3a47abdc">cubeb_stream_destroy</a>(stm);</div>
<div class="line"><a class="code hl_function" href="cubeb_8h.html#ae30a998836d6b7616e8b92136c095f3e">cubeb_destroy</a>(app_ctx);</div>
<div class="ttc" id="acubeb_8h_html_a07198c3846a51423c0547539239face2"><div class="ttname"><a href="cubeb_8h.html#a07198c3846a51423c0547539239face2">cubeb_get_preferred_sample_rate</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_get_preferred_sample_rate(cubeb *context, uint32_t *rate)</div><div class="ttdoc">Get the preferred sample rate for this backend: this is hardware and platform dependent,...</div></div>
<div class="ttc" id="acubeb_8h_html_a5ec1a9ede3a1e49310ca3d7e46d52f83"><div class="ttname"><a href="cubeb_8h.html#a5ec1a9ede3a1e49310ca3d7e46d52f83">cubeb</a></div><div class="ttdeci">struct cubeb cubeb</div><div class="ttdoc">Opaque handle referencing the application state.</div><div class="ttdef"><b>Definition</b> cubeb.h:127</div></div>
<div class="ttc" id="acubeb_8h_html_a71c51be21e1205c4c3c1883793036d56"><div class="ttname"><a href="cubeb_8h.html#a71c51be21e1205c4c3c1883793036d56">cubeb_stream_start</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_stream_start(cubeb_stream *stream)</div><div class="ttdoc">Start playback.</div></div>
<div class="ttc" id="acubeb_8h_html_a76308e6c60f6389675a0d3dc5b9e7c2a"><div class="ttname"><a href="cubeb_8h.html#a76308e6c60f6389675a0d3dc5b9e7c2a">cubeb_stream_init</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_stream_init(cubeb *context, cubeb_stream **stream, char const *stream_name, cubeb_devid input_device, cubeb_stream_params *input_stream_params, cubeb_devid output_device, cubeb_stream_params *output_stream_params, uint32_t latency_frames, cubeb_data_callback data_callback, cubeb_state_callback state_callback, void *user_ptr)</div><div class="ttdoc">Initialize a stream associated with the supplied application context.</div></div>
<div class="ttc" id="acubeb_8h_html_a999d0477ea31f366acbe40e85c91e203a250797c1d649453d9c5f17586cdebfcc"><div class="ttname"><a href="cubeb_8h.html#a999d0477ea31f366acbe40e85c91e203a250797c1d649453d9c5f17586cdebfcc">CUBEB_STREAM_PREF_NONE</a></div><div class="ttdeci">@ CUBEB_STREAM_PREF_NONE</div><div class="ttdoc">No stream preferences are requested.</div><div class="ttdef"><b>Definition</b> cubeb.h:235</div></div>
<div class="ttc" id="acubeb_8h_html_aa6bf94e43fdcef8e32b3409ba2bf9700"><div class="ttname"><a href="cubeb_8h.html#aa6bf94e43fdcef8e32b3409ba2bf9700">cubeb_init</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_init(cubeb **context, char const *context_name, char const *backend_name)</div><div class="ttdoc">Initialize an application context.</div></div>
<div class="ttc" id="acubeb_8h_html_ab43023aaaa06dea4099db1cfe9afed86"><div class="ttname"><a href="cubeb_8h.html#ab43023aaaa06dea4099db1cfe9afed86">cubeb_stream</a></div><div class="ttdeci">struct cubeb_stream cubeb_stream</div><div class="ttdoc">Opaque handle referencing the stream state.</div><div class="ttdef"><b>Definition</b> cubeb.h:129</div></div>
<div class="ttc" id="acubeb_8h_html_aba189b4d443c52cf6c2ad510580c9924"><div class="ttname"><a href="cubeb_8h.html#aba189b4d443c52cf6c2ad510580c9924">cubeb_stream_stop</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_stream_stop(cubeb_stream *stream)</div><div class="ttdoc">Stop playback.</div></div>
<div class="ttc" id="acubeb_8h_html_ac1749e2bace45316a1b6433858f799f2"><div class="ttname"><a href="cubeb_8h.html#ac1749e2bace45316a1b6433858f799f2">cubeb_stream_get_position</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_stream_get_position(cubeb_stream *stream, uint64_t *position)</div><div class="ttdoc">Get the current stream playback position.</div></div>
<div class="ttc" id="acubeb_8h_html_ac6616783295014ed61d512cf3a47abdc"><div class="ttname"><a href="cubeb_8h.html#ac6616783295014ed61d512cf3a47abdc">cubeb_stream_destroy</a></div><div class="ttdeci">CUBEB_EXPORT void cubeb_stream_destroy(cubeb_stream *stream)</div><div class="ttdoc">Destroy a stream.</div></div>
<div class="ttc" id="acubeb_8h_html_adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c"><div class="ttname"><a href="cubeb_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac875c3222153ef33d57211062692928c">CUBEB_OK</a></div><div class="ttdeci">@ CUBEB_OK</div><div class="ttdoc">Success.</div><div class="ttdef"><b>Definition</b> cubeb.h:306</div></div>
<div class="ttc" id="acubeb_8h_html_ae30a998836d6b7616e8b92136c095f3e"><div class="ttname"><a href="cubeb_8h.html#ae30a998836d6b7616e8b92136c095f3e">cubeb_destroy</a></div><div class="ttdeci">CUBEB_EXPORT void cubeb_destroy(cubeb *context)</div><div class="ttdoc">Destroy an application context.</div></div>
<div class="ttc" id="acubeb_8h_html_af02c01f4827fa8febdd796933123eabf"><div class="ttname"><a href="cubeb_8h.html#af02c01f4827fa8febdd796933123eabf">cubeb_get_min_latency</a></div><div class="ttdeci">CUBEB_EXPORT int cubeb_get_min_latency(cubeb *context, cubeb_stream_params *params, uint32_t *latency_frames)</div><div class="ttdoc">Get the minimal latency value, in frames, that is guaranteed to work when creating a stream for the s...</div></div>
<div class="ttc" id="astructcubeb__stream__params_html"><div class="ttname"><a href="structcubeb__stream__params.html">cubeb_stream_params</a></div><div class="ttdoc">Stream format initialization parameters.</div><div class="ttdef"><b>Definition</b> cubeb.h:276</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_a0a911eea8137b5fc2ad1bfbc2e2ddde4"><div class="ttname"><a href="structcubeb__stream__params.html#a0a911eea8137b5fc2ad1bfbc2e2ddde4">cubeb_stream_params::input_params</a></div><div class="ttdeci">cubeb_input_processing_params input_params</div><div class="ttdoc">Requested input processing params.</div><div class="ttdef"><b>Definition</b> cubeb.h:285</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_a23410bac5fbc6d86f37d9fc09f3d5d3d"><div class="ttname"><a href="structcubeb__stream__params.html#a23410bac5fbc6d86f37d9fc09f3d5d3d">cubeb_stream_params::format</a></div><div class="ttdeci">cubeb_sample_format format</div><div class="ttdoc">Requested sample format.</div><div class="ttdef"><b>Definition</b> cubeb.h:277</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_a3f1ff5c9ce242ab67a0bd75bed7b7ccc"><div class="ttname"><a href="structcubeb__stream__params.html#a3f1ff5c9ce242ab67a0bd75bed7b7ccc">cubeb_stream_params::layout</a></div><div class="ttdeci">cubeb_channel_layout layout</div><div class="ttdoc">Requested channel layout.</div><div class="ttdef"><b>Definition</b> cubeb.h:282</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_aa282e861f9563aa4ba49e2c2757cb77a"><div class="ttname"><a href="structcubeb__stream__params.html#aa282e861f9563aa4ba49e2c2757cb77a">cubeb_stream_params::prefs</a></div><div class="ttdeci">cubeb_stream_prefs prefs</div><div class="ttdoc">Requested preferences.</div><div class="ttdef"><b>Definition</b> cubeb.h:284</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_ad67260ce5fd956aba95968e14d827868"><div class="ttname"><a href="structcubeb__stream__params.html#ad67260ce5fd956aba95968e14d827868">cubeb_stream_params::rate</a></div><div class="ttdeci">uint32_t rate</div><div class="ttdoc">Requested sample rate.</div><div class="ttdef"><b>Definition</b> cubeb.h:279</div></div>
<div class="ttc" id="astructcubeb__stream__params_html_afc0221acf53136ed0d17bcf6a52aaae3"><div class="ttname"><a href="structcubeb__stream__params.html#afc0221acf53136ed0d17bcf6a52aaae3">cubeb_stream_params::channels</a></div><div class="ttdeci">uint32_t channels</div><div class="ttdoc">Requested channel count.</div><div class="ttdef"><b>Definition</b> cubeb.h:280</div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">long</span> data_cb(<a class="code hl_typedef" href="cubeb_8h.html#ab43023aaaa06dea4099db1cfe9afed86">cubeb_stream</a> * stm, <span class="keywordtype">void</span> * user,</div>
<div class="line">             <span class="keyword">const</span> <span class="keywordtype">void</span> * input_buffer, <span class="keywordtype">void</span> * output_buffer, <span class="keywordtype">long</span> nframes)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">float</span> * in  = input_buffer;</div>
<div class="line">  <span class="keywordtype">float</span> * out = output_buffer;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nframes; ++i) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; 2; ++c) {</div>
<div class="line">      out[2 * i + c] = in[i];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> nframes;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">void</span> state_cb(<a class="code hl_typedef" href="cubeb_8h.html#ab43023aaaa06dea4099db1cfe9afed86">cubeb_stream</a> * stm, <span class="keywordtype">void</span> * user, <a class="code hl_enumeration" href="cubeb_8h.html#af3f3f5036b85b473d92212155c2cd9b6">cubeb_state</a> state)</div>
<div class="line">{</div>
<div class="line">  printf(<span class="stringliteral">&quot;state=%d\n&quot;</span>, state);</div>
<div class="line">}</div>
<div class="ttc" id="acubeb_8h_html_af3f3f5036b85b473d92212155c2cd9b6"><div class="ttname"><a href="cubeb_8h.html#af3f3f5036b85b473d92212155c2cd9b6">cubeb_state</a></div><div class="ttdeci">cubeb_state</div><div class="ttdoc">Stream states signaled via state_callback.</div><div class="ttdef"><b>Definition</b> cubeb.h:297</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
